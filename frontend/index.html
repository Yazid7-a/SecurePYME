<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SecurePYME - Dashboard de Seguridad</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="logoSecurePYME.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
<div id="dashboard">
  <aside id="sidebar">
    <div class="logo-container">
      <img src="logoSecurePYME.png" alt="Logo" class="logo-sidebar" />
      <h2>SecurePYME</h2>
      <div class="version-badge">v2.0</div>
    </div>
    
    <div class="user-profile">
      <div class="avatar">
        <i class="fas fa-user-shield"></i>
      </div>
      <div class="user-info">
        <span id="username-display">Usuario</span>
        <small>Administrador de seguridad</small>
      </div>
    </div>
    
    <nav>
      <ul>
        <li>
          <button class="nav-btn active" data-target="escanear" onclick="mostrarVista('escanear')">
            <i class="fas fa-radar"></i> Escanear
          </button>
        </li>
        <li>
          <button class="nav-btn" data-target="historial" onclick="mostrarVista('historial')">
            <i class="fas fa-history"></i> Historial
          </button>
        </li>
        <li>
          <button class="nav-btn" data-target="perfil" onclick="mostrarVista('perfil')">
            <i class="fas fa-user-cog"></i> Perfil
          </button>
        </li>
        <li class="divider"></li>
        <li>
          <button class="nav-btn btn-cerrar" onclick="cerrarSesion()">
            <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
          </button>
        </li>
      </ul>
    </nav>
    
    <div id="system-status">
      <div class="status-item">
        <i class="fas fa-shield-alt"></i>
        <span>Sistema Activo</span>
        <div class="status-indicator active"></div>
      </div>
      <div class="status-item">
        <i class="fas fa-cloud"></i>
        <span>Servidor Conectado</span>
        <div class="status-indicator active"></div>
      </div>
    </div>
    
    <div id="sidebar-footer">
      <p class="footer-desc">Sistema de análisis de seguridad</p>
      <p class="footer-copy">© 2024 SecurePYME</p>
    </div>
  </aside>

  <main id="main-content">
    <header class="content-header">
      <h1 id="page-title">Panel de Control</h1>
      <div class="header-actions">
        <button class="btn-help" onclick="mostrarAyuda()">
          <i class="fas fa-question-circle"></i> Ayuda
        </button>
        <div class="notifications">
          <i class="fas fa-bell"></i>
          <span class="notification-badge">3</span>
        </div>
      </div>
    </header>
    
    <div class="welcome-message" id="welcome-message">
      <div class="welcome-content">
        <h1>Bienvenido a SecurePYME</h1>
        <p>Protege tu infraestructura digital con herramientas avanzadas de análisis de seguridad</p>
        <div class="quick-stats">
          <div class="stat-card">
            <div class="stat-icon bg-blue">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="stat-info">
              <h3>Protección</h3>
              <p>en tiempo real</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon bg-red">
              <i class="fas fa-bug"></i>
            </div>
            <div class="stat-info">
              <h3>Vulnerabilidades</h3>
              <p>detectadas</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon bg-green">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
              <h3>Escaneos</h3>
              <p id="total-scans">0 realizados</p>
            </div>
          </div>
        </div>
      </div>
      <div class="welcome-graphic">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Cpath fill='%23007bff' fill-opacity='0.1' d='M200,50 Q300,100 350,200 L50,200 Q100,100 200,50 Z'/%3E%3Ccircle cx='200' cy='150' r='80' fill='none' stroke='%23007bff' stroke-width='2' stroke-dasharray='5,5'/%3E%3Ccircle cx='200' cy='150' r='40' fill='%23007bff' fill-opacity='0.2'/%3E%3C/svg%3E" alt="Security graphic">
      </div>
    </div>
    
    <section id="escanear-view" class="view" style="display:none;">
      <div class="section-header">
        <h2><i class="fas fa-radar"></i> Escaneo de Seguridad</h2>
        <p>Analiza dominios o direcciones IP para detectar vulnerabilidades</p>
      </div>
      
      <form id="form-escanear" onsubmit="event.preventDefault(); escanear();">
        <div class="input-group">
          <div class="input-icon">
            <i class="fas fa-globe-americas"></i>
          </div>
          <input type="text" id="host" placeholder="ejemplo.com o 192.168.1.1" required />
          <button type="submit" class="btn-scan">
            <i class="fas fa-search"></i> Escanear
          </button>
        </div>
        <div class="input-hint">
          <i class="fas fa-info-circle"></i> Ejemplos válidos: google.com, 8.8.8.8, tu-dominio.net
        </div>
      </form>

      <div id="loader" style="display:none;">
        <div class="spinner-container">
          <div class="spinner">
            <div class="spinner-circle"></div>
          </div>
          <p>Analizando seguridad...</p>
          <div class="scan-progress">
            <div class="progress-bar" style="width: 30%"></div>
          </div>
          <div class="scan-stats">
            <span>Escaneando puertos</span>
            <span>Identificando servicios</span>
          </div>
        </div>
      </div>
      
      <div id="resultados" style="display:none;"></div>
    </section>
    
    <section id="historial-view" class="view" style="display:none;">
      <div class="section-header">
        <h2><i class="fas fa-history"></i> Historial de Escaneos</h2>
        <p>Registro de análisis de seguridad realizados</p>
      </div>
      
      <div class="history-controls">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" id="busqueda" placeholder="Buscar host o fecha..." onkeyup="filtrarHistorial()">
        </div>
        <div class="filter-box">
          <i class="fas fa-filter"></i>
          <select id="filtro-riesgo" onchange="filtrarHistorial()">
            <option value="all">Todos</option>
            <option value="high">Alto Riesgo</option>
            <option value="medium">Medio Riesgo</option>
            <option value="low">Bajo Riesgo</option>
          </select>
        </div>
      </div>
      
      <div class="history-container">
        <table id="historial-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Host</th>
              <th>Fecha</th>
              <th>Puertos</th>
              <th>Riesgo</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="historial-body"></tbody>
        </table>
      </div>
    </section>
    
    <section id="perfil-view" class="view" style="display:none;">
      <div class="section-header">
        <h2><i class="fas fa-user-circle"></i> Mi Perfil</h2>
        <p>Administra tu cuenta y preferencias</p>
      </div>
      
      <div class="profile-card">
        <div class="profile-info">
          <div class="info-group">
            <label><i class="fas fa-user"></i> Usuario</label>
            <div class="info-value" id="profile-username">Usuario</div>
          </div>
          
          <div class="info-group">
            <label><i class="fas fa-calendar"></i> Último escaneo</label>
            <div class="info-value" id="last-scan-date">No disponible</div>
          </div>
        </div>
        
        <div class="profile-stats">
          <div class="stat-card">
            <div class="stat-value" id="total-scans-profile">0</div>
            <div class="stat-label">Escaneos totales</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-value" id="avg-risk-profile">0/100</div>
            <div class="stat-label">Riesgo promedio</div>
          </div>
        </div>
      </div>
      
      <div class="profile-actions">
        <button class="btn-logout" onclick="cerrarSesion()">
          <i class="fas fa-sign-out-alt"></i> Cerrar sesión
        </button>
      </div>
    </section>
  </main>
</div>

<!-- Modal de resultados -->
<div id="tech-modal" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="cerrarModal()">&times;</span>
    <div class="modal-header">
      <h3 class="modal-title"><i class="fas fa-file-medical-alt"></i> Informe de Seguridad</h3>
      <div class="risk-badge critical">Riesgo Crítico</div>
    </div>
    
    <div class="modal-tabs">
      <button class="tab-btn active" data-tab="summary">Resumen</button>
      <button class="tab-btn" data-tab="ports">Puertos</button>
      <button class="tab-btn" data-tab="findings">Hallazgos</button>
      <button class="tab-btn" data-tab="recommendations">Recomendaciones</button>
    </div>
    
    <div class="modal-body">
      <div class="tab-content active" id="tab-summary">
        <div class="summary-grid">
          <div class="summary-card">
            <h4><i class="fas fa-info-circle"></i> Información del Host</h4>
            <div class="summary-item">
              <span>Host:</span>
              <span id="tech-host">-</span>
            </div>
            <div class="summary-item">
              <span>Fecha:</span>
              <span id="tech-date">-</span>
            </div>
            <div class="summary-item">
              <span>Duración:</span>
              <span>45 segundos</span>
            </div>
          </div>
          
          <div class="summary-card">
            <h4><i class="fas fa-chart-line"></i> Estadísticas</h4>
            <div class="summary-item">
              <span>Puertos escaneados:</span>
              <span>1,024</span>
            </div>
            <div class="summary-item">
              <span>Puertos abiertos:</span>
              <span id="open-ports">-</span>
            </div>
            <div class="summary-item">
              <span>Vulnerabilidades:</span>
              <span id="vuln-count">-</span>
            </div>
          </div>
          
          <div class="summary-card risk-summary">
            <h4><i class="fas fa-shield-alt"></i> Nivel de Seguridad</h4>
            <div class="risk-meter">
              <div class="risk-level high" style="width: 30%"></div>
            </div>
            <div class="risk-score">
              <span id="tech-score">30</span>/100
              <div class="risk-label">Alto Riesgo</div>
            </div>
            <div class="risk-description">
              Se encontraron vulnerabilidades críticas que requieren atención inmediata
            </div>
          </div>
        </div>
      </div>
      
      <div class="tab-content" id="tab-ports">
        <div id="tab-ports-content"></div>
      </div>
      
      <div class="tab-content" id="tab-findings">
        <div id="tab-vuln-content"></div>
      </div>
      
      <div class="tab-content" id="tab-recommendations">
        <div id="tab-recs-content"></div>
      </div>
    </div>
    
    <div class="modal-actions">
      <button id="export-pdf" class="btn-export">
        <i class="fas fa-file-pdf"></i> Exportar PDF
      </button>
      <button id="export-csv" class="btn-export">
        <i class="fas fa-file-csv"></i> Exportar CSV
      </button>
      <button class="btn-close" onclick="cerrarModal()">Cerrar</button>
    </div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>